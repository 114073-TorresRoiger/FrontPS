<div class="reset-password-container">
  <!-- Sección izquierda - Branding -->
  <div class="left-section">
    <div class="logo-container">
      <div class="branding">
        <div class="logo">
          <img src="assets/logos/logo-negro.png" alt="Tu Oficio Logo" />
        </div>
        <div class="titles">
          <h1 class="main-title">TU OFICIO</h1>
          <p class="subtitle">Restablece tu contraseña</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección derecha - Formulario -->
  <div class="right-section">
    <div class="reset-form-container">
      <div class="form-header">
        <div class="logo-small">
          <div class="small-logo">
            <img src="assets/logos/logo-negro.png" alt="Tu Oficio Logo" />
          </div>
        </div>
        <h2 class="form-title">Restablecer contraseña</h2>
        <p class="form-subtitle">
          Ingresa el código que recibiste en tu correo y tu nueva contraseña.
        </p>
      </div>

      <!-- Mensaje de éxito -->
      <div *ngIf="successMessage()" class="success-message">
        {{ successMessage() }}
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="errorMessage()" class="error-message general-error">
        {{ errorMessage() }}
      </div>

      <form class="reset-form" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <div class="input-group">
          <input
            type="email"
            placeholder="Correo electrónico*"
            class="form-input"
            formControlName="email"
            [class.error]="resetPasswordForm.get('email')?.invalid && resetPasswordForm.get('email')?.touched"
          />
          <div class="error-message" *ngIf="resetPasswordForm.get('email')?.invalid && resetPasswordForm.get('email')?.touched">
            <span *ngIf="resetPasswordForm.get('email')?.errors?.['required']">El correo es requerido</span>
            <span *ngIf="resetPasswordForm.get('email')?.errors?.['email']">Ingresa un correo válido</span>
          </div>
        </div>

        <div class="input-group">
          <input
            type="text"
            placeholder="Código de verificación*"
            class="form-input"
            formControlName="codigo"
            [class.error]="resetPasswordForm.get('codigo')?.invalid && resetPasswordForm.get('codigo')?.touched"
          />
          <div class="error-message" *ngIf="resetPasswordForm.get('codigo')?.invalid && resetPasswordForm.get('codigo')?.touched">
            <span *ngIf="resetPasswordForm.get('codigo')?.errors?.['required']">El código es requerido</span>
          </div>
        </div>

        <div class="input-group">
          <div class="password-input-container">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              placeholder="Nueva contraseña*"
              class="form-input password-input"
              formControlName="nuevaPassword"
              [class.error]="resetPasswordForm.get('nuevaPassword')?.invalid && resetPasswordForm.get('nuevaPassword')?.touched"
            />
            <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
              <lucide-angular [img]="showPassword() ? EyeOff : Eye" size="20"></lucide-angular>
            </button>
          </div>
          <div class="error-message" *ngIf="resetPasswordForm.get('nuevaPassword')?.invalid && resetPasswordForm.get('nuevaPassword')?.touched">
            <span *ngIf="resetPasswordForm.get('nuevaPassword')?.errors?.['required']">La contraseña es requerida</span>
            <span *ngIf="resetPasswordForm.get('nuevaPassword')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</span>
          </div>
        </div>

        <div class="input-group">
          <div class="password-input-container">
            <input
              [type]="showConfirmPassword() ? 'text' : 'password'"
              placeholder="Confirmar contraseña*"
              class="form-input password-input"
              formControlName="confirmarPassword"
              [class.error]="resetPasswordForm.get('confirmarPassword')?.invalid && resetPasswordForm.get('confirmarPassword')?.touched"
            />
            <button type="button" class="password-toggle" (click)="toggleConfirmPasswordVisibility()">
              <lucide-angular [img]="showConfirmPassword() ? EyeOff : Eye" size="20"></lucide-angular>
            </button>
          </div>
          <div class="error-message" *ngIf="resetPasswordForm.get('confirmarPassword')?.invalid && resetPasswordForm.get('confirmarPassword')?.touched">
            <span *ngIf="resetPasswordForm.get('confirmarPassword')?.errors?.['required']">Debes confirmar la contraseña</span>
          </div>
          <div class="error-message" *ngIf="resetPasswordForm.errors?.['passwordMismatch'] && resetPasswordForm.get('confirmarPassword')?.touched">
            <span>Las contraseñas no coinciden</span>
          </div>
        </div>

        <button type="submit" class="submit-btn" [disabled]="!resetPasswordForm.valid || isLoading()">
          <span *ngIf="!isLoading()">Restablecer contraseña</span>
          <div *ngIf="isLoading()" class="loading-content">
            <div class="spinner"></div>
            <span>Procesando...</span>
          </div>
        </button>
      </form>

      <div class="back-to-login">
        <a routerLink="/auth/login" class="back-link">
          <lucide-angular [img]="ArrowLeft" size="16"></lucide-angular>
          Volver al inicio de sesión
        </a>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="isVisible" (click)="close()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Iniciar Conversación</h2>
      <button class="btn-close" (click)="close()">✕</button>
    </div>

    <div class="modal-body">
      <div *ngIf="isLoading" class="loading-state">
        <div class="spinner"></div>
        <p>Cargando profesionales...</p>
      </div>

      <div *ngIf="!isLoading" class="professionals-list">
        <div
          *ngFor="let solicitud of solicitudes"
          class="professional-card"
          (click)="selectProfessional(solicitud)"
        >
          <div class="professional-avatar">
            <img *ngIf="solicitud.imagenUrl" [src]="solicitud.imagenUrl" [alt]="getProfessionalName(solicitud)">
            <span *ngIf="!solicitud.imagenUrl">{{ getInitial(getProfessionalName(solicitud)) }}</span>
          </div>
          
          <div class="professional-info">
            <h3>{{ getProfessionalName(solicitud) }}</h3>
            <div class="professional-specialty">{{ solicitud.especialidad }}</div>
            <div class="solicitud-status" [class]="'status-' + solicitud.estado.toLowerCase()">
              Estado: {{ solicitud.estado }}
            </div>
          </div>

          <div class="solicitud-date">
            {{ solicitud.fechaSolicitud | date: 'dd/MM/yyyy' }}
          </div>
        </div>

        <div *ngIf="solicitudes.length === 0" class="empty-state">
          <p>No tienes solicitudes enviadas</p>
          <p class="empty-subtitle">Envía una solicitud a un profesional para poder iniciar una conversación</p>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="close()">Cancelar</button>
    </div>
  </div>
</div>
